@import "tailwindcss";
@import "@porsche-design-system/components-js/tailwindcss";

@theme {
  --animate-fade-in: fade-in var(--transition-duration-short) var(--ease-in) forwards;
  --shadow-ai: 0px -15px 50px -2px rgba(0, 0, 0, 0.52);
  --p-animation-duration: 20s;
}

@layer components {
  @keyframes reveal-from-bottom {
    from { clip-path: inset(100% 0 0 0); }
    to { clip-path: inset(0 0 0 0); }
  }

  @keyframes slide-in-content {
    from {
      opacity: 0;
      transform: translateY(16px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slide-up-fade {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
}

@layer utilities {
  .animate-slide-up {
    animation: slide-up-fade 0.7s cubic-bezier(0.25, 1, 0.5, 1) backwards;
  }

  .animate-reveal-from-bottom {
    animation: reveal-from-bottom 0.8s cubic-bezier(0.25, 1, 0.5, 1) backwards;
    animation-delay: calc(200ms + var(--i, 0) * 120ms);
  }

  .animate-reveal-from-bottom > * {
    animation: slide-in-content 0.7s cubic-bezier(0.25, 1, 0.5, 1) backwards;
    animation-delay: calc(200ms + var(--i, 0) * 120ms + 100ms);
  }
}

@property --a {
  syntax: "<angle>";
  inherits: false;
  initial-value: 90deg;
}

@property --l {
  syntax: "<percentage>";
  inherits: false;
  initial-value: 10%;
}

@property --c1 {
  syntax: "<color>";
  inherits: false;
  initial-value: #6495ed;
}

@property --c2 {
  syntax: "<color>";
  inherits: false;
  initial-value: #000;
}

@keyframes animate-gradient {
  from {
    --a: 0deg;
    --l: 0%;
  }
  to {
    --a: 360deg;
    --l: 100%;
  }
}

@keyframes pulse-blur {
  0%,
  100% {
    --blur-amount: 90px;
  }
  50% {
    --blur-amount: 95px;
  }
}

.c-popover::before {
  content: "";
  @apply absolute inset-0 pointer-events-none z-0;
  will-change: filter, background;
  box-shadow: 0 0 0 transparent;
  --a: 0deg;
  --c1: #6495ed;
  --c2: #000;
}

.c-popover.is-animated::before {
  background: conic-gradient(from var(--a) at 50% 50%, var(--c1), var(--c2));
  filter: blur(var(--blur-amount, 90px));
  opacity: 0.7;
  animation: animate-gradient var(--p-animation-duration) linear infinite, pulse-blur 10s ease-in-out infinite;
  z-index: 1;
}

@layer components {
  .c-button {
    @apply fixed end-fluid-md bottom-fluid-md cursor-pointer shadow-medium p-[15px] rounded-[50%] bg-base transition hover:bg-hover focus-visible:outline outline-focus outline-offset-2 forced-colors:border;
  }

  .c-popover {
    @apply fixed inset-0 w-full h-full bg-base-dark overflow-y-auto prose-text-sm animate-fade-in forced-colors:border p-static-sm rounded-none shadow-none;
    @apply sm:inset-auto sm:bottom-[calc(var(--spacing-static-md)+var(--spacing-fluid-md)+15px*2+1.5rem)]
    sm:end-fluid-md sm:w-[min(25rem,480px)] sm:h-[min(75vh,800px)] sm:p-static-sm
    sm:rounded-[30px] sm:shadow-medium;
    @apply sm:overflow-x-hidden;
  }

  .c-header {
    @apply sticky left-0 top-0 flex items-center gap-static-sm z-1 p-static-md;
  }

  .c-footer {
    @apply shadow-ai bg-surface sticky -bottom-[8px] p-static-sm py-static-md mt-0 pt-static-sm z-2 grid gap-fluid-sm forced-colors:bg-base forced-colors:border-t forced-colors:pt-static-md rounded-t-3xl sm:rounded-3xl;
  }

  .c-form {
    @apply grid grid-cols-[auto_minmax(0,1fr)_repeat(2,auto)] gap-x-static-md gap-y-static-md items-center p-static-sm bg-surface rounded-2xl focus-within:outline outline-focus;
  }

  .c-input {
    @apply [field-sizing:content] py-[15px] [max-block-size:4.5rlh] [font:inherit] outline-none resize-none;
  }

  .c-upload {
    @apply p-[2px] cursor-pointer rounded-sm transition hover:bg-hover focus-visible:outline outline-focus outline-offset-[-2px];
  }

  .c-icon {
    @apply p-[6px] bg-primary rounded-md;
  }

  .c-question {
    @apply justify-self-end max-w-4/5 p-static-md bg-surface rounded-2xl rounded-ee-none grid gap-fluid-sm animate-fade-in;
  }

  .c-answer {
    @apply grid gap-x-static-md grid-cols-[auto_minmax(0,1fr)] animate-fade-in;
  }

  .c-cta {
    @apply grid grid-cols-[auto_minmax(0,1fr)] gap-x-static-md items-center cursor-pointer text-start rounded-lg -m-static-xs p-static-xs transition hover:bg-frosted focus-visible:outline outline-focus;
  }

  .c-card {
    @apply flex gap-static-md items-center border-thin border-contrast-low rounded-md p-fluid-sm transition hover:bg-hover focus-visible:outline outline-focus outline-offset-2;
  }
}
